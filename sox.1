.TH SoX 1 "December 24, 2006" "sox" "Sound eXchange"
.SH NAME
SoX \- Sound eXchange: The Swiss Army knife of audio manipulation
.SH SYNOPSIS
.nf
\fBsox\fR \fIinfile1\fR \fB[\fR\fIinfile2\fR \fB...]\fR \fIoutfile\fR

\fBsox [\fR\fIglobal options\fR\fB] [\fR\fIformat options\fR\fB]\fR \fIinfile1\fR
    \fB[ [\fR\fIformat options\fR\fB]\fR \fIinfile2\fR \fB...] [\fR\fIformat options\fR\fB]\fR \fIoutfile\fR
    \fB[\fR\fIeffect\fR \fB[\fR\fIeffect options\fR\fB] ...]\fR

\fBsoxmix\fR \fIinfile1 infile2\fR \fB[\fR\fIinfile3\fR \fB...]\fR outfile\fR

\fBsoxmix [\fR\fIglobal options\fR\fB] [\fR\fIformat options\fR\fB]\fR \fIinfile1\fR
    \fB[\fR\fIformat options\fR\fB]\fR \fIinfile2\fR
    \fB[ [\fR\fIformat options\fR\fB]\fR \fIinfile3\fR \fB...]\fR
    \fB[\fR\fIformat options\fR\fB]\fR \fIoutfile\fR
    \fB[\fR\fIeffect\fR \fB[\fR\fIeffect options\fR\fB] ]...\fR
.fi
.SH DESCRIPTION
SoX reads and writes most popular audio formats and can optionally apply
effects to them; it includes a basic audio synthesiser, and on Unix-like
systems, can play and record audio files.

SoX can also combine multiple input files (with the same sample rate and
number of channels) to form one output file using one of three methods:
`concatenate' (the default), `mix', or `merge'.  \fBsoxmix\fR is an
alias for \fBsox\fR for which the default combining method is `mix'.

The overall SoX processing chain can be summarised as follows:

.ce
Input(s) \[->] Combiner \[->] Effects \[->] Output
.SS File Formats
There are two types of audio file format that SoX can work with.  The
first is `self-describing'.  Such formats include a header that
completely describes the characteristics of the audio data that follows.
The second type is `headerless', often called raw data.  For a file of
this type, the audio data characteristics are sometimes described by the
file-name extension, sometimes by giving format options on the SoX
command line, and otherwise by a combination of the two.

The following four characteristics are sufficient to describe
audio data so that it can be processed with SoX:
.TP
sample rate
The sample rate in samples per second (or Hz).  For example, digital telephony
traditionally uses a sample rate of 8000Hz; CDs use 44,100Hz.
.TP
sample size
The number of bits (or bytes) used to store each sample.  Most popular are
8-bit (i.e. one byte) and 16-bit (i.e. two bytes, or one `word').
.TP
data encoding
The way in which each audio sample is stored (or `encoded').
Some encodings involve an element of `compression'.
Commonly-used encoding types include: floating-point, u-law, ADPCM, signed
linear, FLAC, etc.
.TP
channels
The number of audio channels contained in the file.  One (`mono') and two
(`stereo') are widely used.
.PP
The term `bit-rate' is sometimes used as an overall measure of an audio
format and may incorporate elements of all of the above.

Most `self-describing' file formats also allow textual `comments' to be
embedded in the file that can be used to describe the audio in some way,
e.g. for music, the title, the author, etc.

.\" FIXME rework needed
By default, SoX attempts to write audio data using the same data type,
sample rate, and channel count as the input data.  If that is not what
is wanted, then format options can be used to specify the differences.

If an output file format does not support the same data type, sample
rate, or channel count as the input file format, then unless overridden
on the command line, SoX will automatically select the closest values
that the format does support.

SoX uses the following method to determine the type of audio to use for
each input file and the output file:
If a type has been given (with
.B \-n
or \fB\-t\fR), then the given type will be used,
otherwise,
SoX will try first using the file header (input files only), and then
the file-name extension to determine the file type.
If the file type cannot be determined, then
SoX will exit with an error.
.\" FIXME ends

Translating an audio file from one format to another with
SoX is `lossless'
(i.e. translating back again would yield an exact copy of the original
audio data)
where it
can be, i.e. when not using `lossy' compression (A-law, MP3, etc.)
and the number of bits used in the destination format is not less than
in the source format.

E.g. translating from an 8-bit PCM format to a 16-bit PCM format is
lossless but translating from a 8-bit PCM format to (8-bit) A-law isn't.
When performing a lossy translation,
SoX uses rounding to retain as much accuracy as possible in the
audio data.
.SS Clipping
Clipping is distortion that occurs when an audio signal
level (or `volume') exceeds the range of the chosen representation.
It is nearly always undesirable and so should usually be corrected by
adjusting the audio volume prior to the point at which clipping occurs.

In SoX, clipping could occur, as you might expect, when using the
.B vol
effect to increase the audio volume, but could also occur with many
other effects, when converting one format to another, and even when
simply playing the audio.

Playing an audio file often involves re-sampling, and processing by
analogue components that can introduce a small DC offset and/or
amplification, all of which can produce distortion if the audio signal
level was initially too close to the clipping point.

For these reasons, it is usual to make sure that an audio
file's signal level does not exceed around 70% of the maximum (linear)
range available, as this will avoid the majority of clipping problems.
SoX's
.B stat
effect can assist in determining the signal level in an audio file; the
.B vol
effect can be used to prevent clipping e.g.

	sox tinny.au better.au vol \-6 dB bass +6

guarantees that the bass boost will not clip.

If clipping occurs at any point during processing, then
SoX will display a warning message to that effect.
.SS Input File Balancing
When multiple input files are given, SoX applies any specified
effects (including, for example, volume adjustment) after the audio
has been combined.  However, as with a traditional audio mixer, it is
useful to be able to set the volume of (i.e. `balance') the inputs
individually, before combining takes place.

If the selected combining method is `mix' then, to guarantee that
clipping does not occur at the mixing stage, SoX defaults to
adjusting the amplitude of each input signal by a factor of 1/n, where n
is the number of input files; if this results in audio that is perceived
to be too quiet, then the volume adjustments can be set manually
instead.  For the other combining methods, the default behaviour is for no
input volume adjustments.

Manual input file volume adjustment is performed using the
.B \-v
option (see below) which, as with format options, can be given for one
or more input files; if it is given for only some of the input files
then the others receive no volume adjustment (regardless of combining
method)

The \fB\-V\fR option (below) can be used to show the input file volume
adjustments that have been selected (either manually or automatically).
.SS Examples
The command line syntax can seem complex, but in essence:

	sox file.au file.wav

translates an audio file in SUN Sparc .AU format
into a Microsoft .WAV file, while

	sox file.au \-r 12000 \-1 file.wav vol 0.5 dither

does the same format translation but also
changes the sampling rate to 12000 Hz,
the sample size to 1 byte (8 bits),
and applies the \fBvol\fR and \fBdither\fR effects
to the audio.

	sox short.au long.au longer.au

concatenates two audio files to produce a single file, whilst

	sox \-m music.mp3 voice.wav mixed.flac

mixes together two audio files.

See also the
.BR soxexam (1)
manual page for a more detailed description of
SoX and further examples on how to use
SoX with various file formats and effects.
.SH OPTIONS
.SS Special File-name Options
Each of these options is used in special circumstances in place of a normal
file-name on the command line.
.TP
\fB\-\fR
SoX can be used in pipeline operations by using the special
file-name `\-' which,
if used in place of input file-name, will cause
SoX will read audio data from stdin,
and which,
if used in place of output file-name, will cause
SoX will send audio data to stdout.
Note that when using this option, the file-type (see
.B \-t
below) must also be given.
.TP
\fB\-n\fR
This can be used in place of an input or output file-name
to specify that the `null' file type should be used.  See
.B null
below for further information.
.TP
\fB\-e\fR
This is just an alias of
.B \-n
but is left here for historical reasons.
.SS Global Options
These options can be specified on the command line at any point
before the first effect name.
.TP
\fB\fB\-\-force\fR
Force SoX to overwrite an existing file with the same name as that
given for the output file without first prompting to do so.
.TP
\fB\-h\fR, \fB\-\-help\fR
Show version number and usage information.
.TP
\fB\-\-help\-effect=name\fR
Show usage information on the specified effect.  The name
\fBall\fR can be used to show usage on all effects.
.TP
\fB\-m\fR, \fB\-\-mix\fR
Set the input file combining method to `mix'.
Two or more input files must be given,
and will be mixed together (instead of concatenated)
to form the output file.

See also \fBInput File Balancing\fR above.
.TP
\fB\-M\fR, \fB\-\-merge\fR
Set the input file combining method to `merge'.
Two or more input files must be given,
and will be merged together (instead of concatenated)
to form the output file.

This can be used for example to merge two mono files into one
stereo file; the first and second mono files become
the left and right channels of the stereo file.
.TP
\fB\-o\fR
Run in a mode that can be used, in conjunction with the GNU
Octave program, to assist with the selection and configuration
of many of the filtering effects.  For the first given effect
that supports the \fB\-o\fR option, SoX will output Octave
commands to plot the effect's transfer function, and then exit
without actually processing any audio.  E.g.

	sox \-o input-file \-n highpass 1320 > plot.m
.br
	octave plot.m
.TP
\fB\-q\fR
Run in quiet mode when SoX wouldn't otherwise do so;
this is the converse of the \fB\-S\fR option.
.TP
\fB\-S\fR
Display input file format/header information and input file(s)
processing progress in terms of elapsed/remaining time and percentage.
This option is enabled by default when using
SoX to play or record audio.
.TP
\fB\-\-version\fR
Show version number and exit.
.IP \fB\-V\fB[\fRlevel\fB]\fR\fP
Set verbosity.
SoX prints messages to the console (stderr) according to the following
verbosity levels:
.IP
.RS
.IP 0
No messages are printed at all; use the exit status to determine
if an error has occurred.
.IP 1
Only error messages are printed.  These are generated if
SoX cannot complete the requested commands.
.IP 2
Warning messages are also printed.  These are generated if
SoX can complete the requested commands,
but not exactly according to the requested command parameters,
or if clipping occurs.
.IP 3
Descriptions of
SoX's processing phases are also printed.
Useful for figuring out exactly how
SoX is mangling your audio.
.IP "4 and above"
Messages to help with debugging
SoX are also printed.
.RE
.IP
By default, the verbosity level is set to 2.  Each occurrence of the \fB\-V\fR
option increases the verbosity level by 1.  Alternatively, the verbosity
level can be set to an absolute number by specifying it immediately after
the
.B \-V
e.g.
.B \-V0
sets it to 0.
.IP
.SS Input File Options
These options apply to only input files and may only precede input
file-names on the command line.
.TP
\fB\-v \fIvolume\fR
Adjust volume by a factor of \fIvolume\fR.
This is a linear (amplitude) adjustment, so a number less than 1
decreases the volume; greater than 1 increases it.  If a negative number
is given, then in addition to the volume adjustment, the audio signal
will be inverted.

See also the \fBstat\fR effect for information on how to find
the maximum volume of an audio file; this can be used to help select
suitable values for this option.

See also \fBInput File Balancing\fR above.
.SS Input And Output File Format Options
These options apply to the input or output file whose name they
immediately precede on the command line; they are used mainly when
working with headerless file formats or when specifying a format
for the output file that is different to that of the input file.
.TP
\fB\-c \fIchannels\fR
The number of audio channels in the audio file.
This may be 1, 2, or 4; for mono, stereo, or quad audio.  To cause
the output file to have a different number of channels than the input
file, include this option with the output file options.
If the input and output file have a different number of channels then the
.B avg
effect must be used.  If the
.B avg
effect is not specified on the
command line it will be invoked internally with default parameters.
.TP
\fB\-r \fIrate\fR
Gives the sample rate in Hz of the file.  To cause the output file to have
a different sample rate than the input file, include this option as a part
of the output format options.

If the input and output files have
different rates then a sample rate change effect must be run.  Since
SoX has
multiple rate changing effects, the user can specify which to use as an effect.
If no rate change effect is specified then a default one will be chosen.
.TP
\fB\-t \fIfile-type\fR
Gives the type of the audio file.  This is useful when the
file extension is non-standard or when the type can not be determined by
looking at the header of the file.

The
.B \-t
option can also be used to override the type implied by an input file-name
extension, but if overriding with a type that has a header,
SoX will exit with an appropriate error message if such a header is not
actually present.

See \fBFILE TYPES\fR below for a list of supported file types.
.TP
\fB\-x\fR
The audio data comes from a machine with the opposite word order
than yours and must
be swapped according to the word-size given above.
Only 16-bit, 24-bit, and 32-bit integer data may be swapped.
Machine-format floating-point data is not portable.
.TP
\fB\-s/\-u/\-U/\-A/\-a/\-i/\-g/\-f\fR
The audio data encoding is signed linear (2's complement),
unsigned linear, u-law (logarithmic), A-law (logarithmic),
ADPCM, IMA-ADPCM, GSM, or Floating-point.

U-law (actually short for mu-law) and A-law are the U.S. and
international standards for logarithmic telephone audio compression.
When uncompressed u-law has roughly the precision of 13-bit PCM audio
and A-law has roughly the precision of 14-bit PCM audio.

A-law and u-law data is sometimes encoded using a reversed bit-ordering
(i.e. MSB becomes LSB).  Internally, SoX understands how to work with
this encoding but there is currently no command line option to
specify it.  If you need this support then you can use the pseudo
file types of `.la' and `.lu' to inform SoX of the encoding.  See
supported file types for more information.

ADPCM is a form of audio compression that has a good
compromise between good audio quality and fast encoding/decoding
time.  It is used for telephone audio compression and places were
full fidelity is not as important.  When uncompressed it has roughly
the precision of 16-bit PCM audio.  Popular version of ADPCM include
G.726, MS ADPCM, and IMA ADPCM.  The \fB\-a\fR flag has different meanings
in different file handlers.  In \fB.wav\fR files it represents MS ADPCM
files, in all others it means G.726 ADPCM.
IMA ADPCM is a specific form of ADPCM compression, slightly simpler
and slightly lower fidelity than Microsoft's flavor of ADPCM.
IMA ADPCM is also called DVI ADPCM.

GSM is currently used for the vast majority of the world's digital
wireless telephone calls.  It utilises several audio
formats with different bit-rates and associated speech quality.
SoX has support for GSM's original 13kbps `Full Rate' audio format.
It is usually CPU intensive to work with GSM audio.
.TP
\fB\-1/\-2/\-3/\-4/\-8\fR
The sample datum size is 1, 2, 3, 4, or 8 bytes; i.e 8, 16, 24, 32, or 64 bits.
.TP
\fB\-b/\-w/\-l/\-d\fR
Aliases for \-1/\-2/\-4/\-8.
Abbreviations of: byte, word, long word, double long (long long) word.
.SS Output File Format Options
These options apply to only the output file and may only precede the output
file-name on the command line.
.TP
\fB\-\-comment \fItext\fR
Specify the comment text to store in the output file header (where
applicable).
.TP
\fB\-\-comment\-file \fIfile-name\fR
Specify a file containing the comment text to store in the output
file header (where applicable).
.TP
\fB\-C \fIcompression-factor\fR
The compression factor for variably compressing output file formats.  If
this option is not given, then a default compression factor will apply.
The compression factor is interpreted differently for different
compressing file formats.  See the description of the file formats that
use this option for more information.
.SH FILE TYPES
Note: a file type that can be determined
by file-name extension is listed with its name preceded by a dot.

.TP
.B .8svx
Amiga 8SVX musical instrument description format.
.TP
.B .aiff
AIFF files used on Apple IIc/IIgs and SGI.
Note: the AIFF format supports only one SSND chunk.
It does not support multiple audio chunks,
or the 8SVX musical instrument description format.
AIFF files are multimedia archives and
can have multiple audio and picture chunks.
You may need a separate archiver to work with them.
.TP
.B .aifc
AIFF-C (not compressed, linear), defined in DAVIC 1.4 Part 9 Annex B.
This format is referred from ARIB STD-B24, which is specified for
Japanese data broadcasting.  Any private chunks are not supported.

Note: The infile is processed as .aiff currently.
.TP
.B alsa
ALSA default device driver.
This is a pseudo-file type and can be optionally compiled into SoX.  Run
.B sox \-h
to see if you have support for this file type.  When this driver is used
it allows you to open up the ALSA /dev/snd/pcmCxDxp file and configure it to
use the same data format as passed in to SoX.
It works for both playing and recording audio files.  When playing audio
files it attempts to set up the ALSA driver to use the same format as the
input file.  It is suggested to always override the output values to use
the highest quality format your ALSA system can handle.  Example:
.B sox infile \-t alsa default
.TP
.B .au
SUN Microsystems AU files.
There are apparently many types of .au files;
DEC has invented its own with a different magic number
and word order.
The .au handler can read these files but will not write them.
Some .au files have valid AU headers and some do not.
The latter are probably original SUN u-law 8000 Hz files.
These can be dealt with using the
.B .ul
format (see below).

It is possible to override .au file header information
with the
.B \-r
and
.B \-c
options, in which case
SoX will issue a warning to that effect.
.TP
.B .avr
Audio Visual Research.
The AVR format is produced by a number of commercial packages
on the Mac.
.TP
.B .cdr
CD-R.  CD-R files are used in mastering music on Compact Disks.
The audio data on a CD-R disk is a raw audio file
with a format of stereo 16-bit signed samples at a 44.1kHz sample
rate.  There is a special blocking/padding oddity at the end
of the audio file, which is why it needs its own handler.
.TP
.B .cvs
Continuously Variable Slope Delta modulation.
Used to compress speech audio for applications such as voice mail.
.TP
.B .dat
Text Data files.
These files contain a textual representation of the
sample data.  There is one line at the beginning
that contains the sample rate.  Subsequent lines
contain two numeric data items: the time since
the beginning of the first sample and the sample value.
Values are normalized so that the maximum and minimum
are 1 and \-1.  This file format can be used to
create data files for external programs such as
FFT analysers or graph routines.  SoX can also convert
a file in this format back into one of the other file
formats.
.TP
.B .flac
Free Lossless Audio Codec compressed audio.
FLAC is an open, patent-free CODEC designed for compressing
music.  It is similar to MP3 and Ogg Vorbis, but lossless,
meaning that audio is compressed in FLAC without any loss in
quality.

SoX can decode native FLAC files (.flac) but not Ogg FLAC files (.ogg).
[But see
.B .ogg
below for information relating to support for Ogg
Vorbis files.]

SoX has rudimentary support for writing FLAC files: it can encode to
native FLAC using compression levels 0 to 8. 8 is the default
compression level and gives the best (but slowest) compression;
0 gives the least (but fastest) compression.  The compression
level can be selected using the
.B \-C
option (see above) with a whole number from 0 to 8.

Note that Replay Gain information is not used by
SoX if present in FLAC input files and is not generated by
SoX for FLAC output files, however
SoX will copy input file `comments' (which can be used to hold Replay Gain
information) to output files that support comments, so FLAC output files
may contain Replay Gain information if some was present in the input
file.  In this case the Replay Gain information in the output file is
likely to be incorrect and so should be recalculated using a tool that
supports this (not SoX).

FLAC support in
SoX is optional and requires optional FLAC libraries.  To
see if there is support for FLAC run \fBsox \-h\fR and look for
it under the list of supported file formats as `flac'.
.TP
.B .gsm
GSM 06.10 Lossy Speech Compression.
A lossy format for compressing speech which is used in the
Global Standard for Mobile telecommunications (GSM).  It's good
for its purpose, shrinking audio data size, but it will introduce
lots of noise when a given audio signal is encoded and decoded
multiple times.  This format is used by some voice mail applications.
It is rather CPU intensive.

GSM in
SoX is optional and requires access to an external GSM library.  To see
if there is support for GSM run \fBsox \-h\fR
and look for it under the list of supported file formats.
.TP
.B .hcom
Macintosh HCOM files.
These are (apparently) Mac FSSD files with some variant
of Huffman compression.
The Macintosh has wacky file formats and this format
handler apparently doesn't handle all the ones it should.
Mac users will need your usual arsenal of file converters
to deal with an HCOM file under Unix or DOS.
.TP
.B .maud
An IFF-conforming audio file type, registered by
MS MacroSystem Computer GmbH, published along
with the `Toccata' sound-card on the Amiga.
Allows 8bit linear, 16bit linear, A-Law, u-law
in mono and stereo.
.TP
.B .mp3
MP3 compressed audio.  MP3 (MPEG Layer 3) is part of the
MPEG standards for audio and video compression.  It is a lossy
compression format that achieves good compression rates with little
quality loss.  See also
.B Ogg Vorbis
for a similar format.

MP3 support in
SoX is optional and requires access to either or both the external
libmad and libmp3lame libraries.  To
see if there is support for Mp3 run \fBsox \-h\fR
and look for it under the list of supported file formats as `mp3'.

.TP
.B null
Null file type.
This is a special file type that can be used when normal
file reading or writing is not needed to use a particular effect.
It is selected by using the
special file-name
.B \-n
in place of an input or output file-name.

Using this file type to input audio is equivalent to
using a normal audio file that contains an infinite amount
of silence, and as such is not generally useful unless used
with an effect that specifies a finite time length
(such as \fBtrim\fR or \fBsynth\fR).

Using this type to output audio amounts to discarding the audio
and is useful mainly with effects that produce information about the
audio instead of affecting it
(such as \fBnoiseprof\fR or \fBstat\fR).

The number of channels and the sampling rate associated with a null file
are by default 2 and 44.1kHz respectively, but these can be overridden
if necessary by using appropriate \fBFormat Options\fR.

One other use of the null file type is to use it in conjunction
with
.B \-V
to display information from the audio file header
without having to read any further into the file.  E.g.
.B sox \-V *.wav \-n
will display header information for each `WAV' file in the current
directory.
.TP
.B .ogg
Ogg Vorbis compressed audio.
Ogg Vorbis is a open, patent-free CODEC designed for compressing music
and streaming audio.  It is a lossy compression format (similar to MP3,
VQF & AAC) that achieves good compression rates with a minimum amount of
quality loss.  See also
.B MP3
for a similar format.

SoX can decode all types of Ogg Vorbis files, and can encode at different
compression levels/qualities given as a number from \-1 (highest
compression/lowest quality) to 10 (lowest compression, highest quality).
By default the encoding quality level is 3 (which gives an encoded rate
of approx. 112kbps), but this can be changed using the
.B \-C
option (see above) with a number from \-1 to 10; fractional numbers (e.g.
3.6) are also allowed.

Decoding is somewhat CPU intensive and encoding is very CPU intensive.

Ogg Vorbis in
SoX is optional and requires access to external Ogg Vorbis libraries.  To
see if there is support for Ogg Vorbis run \fBsox \-h\fR
and look for it under the list of supported file formats as `vorbis'.
.TP
.B ossdsp
OSS /dev/dsp device driver.
This is a pseudo-file type and can be optionally compiled into SoX.  Run
.B sox \-h
to see if you have support for this file type.  When this driver is used
it allows you to open up the OSS /dev/dsp file and configure it to
use the same data format as passed in to SoX.
It works for both playing and recording audio files.  When playing audio
files it attempts to set up the OSS driver to use the same format as the
input file.  It is suggested to always override the output values to use
the highest quality format your OSS system can handle.  Example:
.B sox infile \-t ossdsp \-w \-s /dev/dsp
.TP
.B .prc
Psion Record.  Used in some Psion devices for System alarms and recordings made by the built-in Record application.  This format is newer then
the .wve format that is used in some Psion devices.
.TP
.B .sf
IRCAM Sound Files.  Used by academic music software
such as the `CSound' package, and the `MixView sound sample editor'.
.TP
.B .sph
SPHERE (SPeech HEader Resources) is a file format defined by NIST
(National Institute of Standards and Technology) and is used with
speech audio.  SoX can read these files when they contain
u-law and PCM data.  It will ignore any header information that
says the data is compressed using \fIshorten\fR compression and
will treat the data as either u-law or PCM.  This will allow SoX
and the command line \fIshorten\fR program to be run together using
pipes to encompasses the data and then pass the result to SoX for processing.
.TP
.B .smp
Turtle Beach SampleVision files.
SMP files are for use with the PC-DOS package SampleVision by Turtle Beach
Softworks.  This package is for communication to several MIDI samplers.  All
sample rates are supported by the package, although not all are supported by
the samplers themselves.  Currently loop points are ignored.
.TP
.B .snd
Under DOS this file format is the same as the \fB.sndt\fR format.  Under all
other platforms it is the same as the \fB.au\fR format.
.TP
.B .sndt
SoundTool files.
This is an older DOS file format.
.TP
.B sunau
Sun /dev/audio device driver.
This is a pseudo-file type and can be optionally compiled into SoX.  Run
.B sox \-h
to see if you have support for this file type.  When this driver is used
it allows you to open up a Sun /dev/audio file and configure it to
use the same data type as passed in to SoX.
It works for both playing and recording audio files.  When playing audio
files it attempts to set up the audio driver to use the same format as the
input file.  It is suggested to always override the output values to use
the highest quality format your hardware can handle.  Example:
.B sox infile \-t sunau \-w \-s /dev/audio
or
.B sox infile \-t sunau \-U \-c 1 /dev/audio
for older sun equipment.
.TP
.B .txw
Yamaha TX-16W sampler.
A file format from a Yamaha sampling keyboard which wrote IBM-PC
format 3.5" floppies.  Handles reading of files which do not have
the sample rate field set to one of the expected by looking at some
other bytes in the attack/loop length fields, and defaulting to
33kHz if the sample rate is still unknown.
.TP
.B .vms
.\" FIXME: More info to come?
Used to compress speech audio for applications such as voice mail.
.TP
.B .voc
Sound Blaster VOC files.
VOC files are multi-part and contain silence parts, looping, and
different sample rates for different chunks.
On input, the silence parts are filled out, loops are rejected,
and sample data with a new sample rate is rejected.
Silence with a different sample rate is generated appropriately.
On output, silence is not detected, nor are impossible sample rates.
Note, this version now supports playing VOC files with multiple
blocks and supports playing files containing u-law and A-law samples.
.TP
.B vorbis
See
.B .ogg
format.
.TP
.B .vox
A headerless file of Dialogic/OKI ADPCM audio data commonly comes with the
extension .vox.  This ADPCM data has 12-bit precision packed into only 4-bits.
.TP
.B .wav
Microsoft .WAV RIFF files.
This is the native audio file format of Windows, and widely used for uncompressed audio.

Normally \fB.wav\fR files have all formatting information
in their headers, and so do not need any format options
specified for an input file.  If any are, they will
override the file header, and you will be warned to this effect.
You had better know what you are doing! Output format
options will cause a format conversion, and the \fB.wav\fR
will written appropriately.

SoX currently can read PCM, ULAW, ALAW, MS ADPCM, and IMA (or DVI) ADPCM.
It can write all of these formats including the ADPCM encoding.
Big endian versions of RIFF files, called RIFX, can also be read
and written.  To write a RIFX file, use the
.B \-x
option with the output file options.
.TP
.B .wve
Psion 8-bit A-law.  Used on older Psion PDAs.
.TP
.B .xa
Maxis XA files.
These are 16-bit ADPCM audio files used by Maxis games.  Writing .xa files is
currently not supported, although adding write support should not be very
difficult.
.TP
.B .raw
Raw files (no header).
The sample rate, size (byte, word, etc),
and encoding (signed, unsigned, etc.)
of the audio file must be given.
The number of channels defaults to 1.
.TP
.B .ub .sb .uw .sw .ul .al .lu .la .sl
These suffices serve as
shorthand for raw files with a given size and encoding.
Thus, \fBub, sb, uw, sw, ul, al, lu, la\fR and \fBsl\fR
correspond to `unsigned byte', `signed byte',
`unsigned word', `signed word', `u-law' (byte), `A-law' (byte),
inverse bit order `u-law', inverse bit order `A-law', and `signed long'.
The sample rate defaults to 8000 Hz if not explicitly set,
and the number of channels defaults to 1.
There are lots of Sparc samples floating around in u-law format
with no header and fixed at a sample rate of 8000 Hz.
(Certain audio management software cheerfully ignores the headers.)
Similarly, most Mac audio files are in unsigned byte format with
a sample rate of 11025 or 22050 Hz.
.SH EFFECTS
Multiple effects may be applied to the audio by specifying them
one after another at the end of the command line.

Optionality is denoted by brackets \fB[ ]\fR;
multiplicity is denoted by braces \fB{ }\fR or an ellipsis \fB...\fR;
alternatives are indicated with a vertical bar \fB|\fR.
.TP
avg \fB[\fR\-l\fB\^|\^\fR\-r\fB\^|\^\fR\-f\fB\^|\^\fR\-b\fB\^|\^\fR\-1\fB\^|\^\fR\-2\fB\^|\^\fR\-3\fB\^|\^\fR\-4\fB\^|\^\fR\fIn\fR,\fIn\fR,\fB...\fR,\fIn\fR\fR\fB]\fR
Reduce the number of channels by averaging the samples,
or duplicate channels to increase the number of channels.
This effect is automatically used when the number of input
channels differ from the number of output channels.  When reducing
the number of channels it is possible to manually specify the
.B avg
effect and use the \fB\-l\fR, \fB\-r\fR, \fB\-f\fR, \fB\-b\fR,
\fB\-1\fR, \fB\-2\fR, \fB\-3\fR, \fB\-4\fR, options to select only
the left, right, front, back channel(s) or specific channel
for the output instead of averaging the channels.
The \fB\-l\fR, and \fB\-r\fR options will do averaging
in quad-channel files so select the exact channel to prevent this.

The
.B avg
effect can also be invoked with up to 16
numbers, separated by commas, which specify the proportion (0 = 0% and 1 = 100%)
of each input channel that is to be mixed into each output channel.
In two-channel mode, 4 numbers are given: l\[->]l, l\[->]r, r\[->]l, and r\[->]r,
respectively.
In four-channel mode, the first 4 numbers give the proportions for the
left-front output channel, as follows: lf\[->]lf, rf\[->]lf, lb\[->]lf, and
rb\[->]rf.
The next 4 give the right-front output in the same order, then
left-back and right-back.

It is also possible to use the 16 numbers to expand or reduce the
channel count; just specify 0 for unused channels.

Finally, certain reduced combination of numbers can be specified
for certain input/output channel combinations.
.TS
center box ;
cB cB cB lB
c c c l .
In Ch	Out	Ch	Num Mappings
2	1	2	l\[->]l, r\[->]l
2	2	1	adjust balance
4	1	4	lf\[->]l, rf\[->]l, lb\[->]l, rb\[->]l
4	2	2	lf\[->]l&rf\[->]r, lb\[->]l&rb\[->]r
4	4	1	adjust balance
4	4	2	front balance, back balance
.TE

.TP
band \fB[\fR\-n\fB]\fR \fIcenter\fR \fB[\fR\fIwidth\fR\fB]\fR
Apply a band-pass filter.
The frequency response drops logarithmically
around the
.I center
frequency.
The
.I width
gives the slope of the drop.
The frequencies at
.I center
+
.I width
and
.I center
\-
.I width
will be half of their original amplitudes.
.B band
defaults to a mode oriented to pitched audio,
i.e. voice, singing, or instrumental music.
The \fB\-n\fR (for noise) option uses the alternate mode
for un-pitched audio e.g. percussion.
.B Warning:
\fB\-n\fR introduces a power-gain of about 11dB in the filter, so beware
of output clipping.
.B band
introduces noise in the shape of the filter,
i.e. peaking at the
.I center
frequency and settling around it.

This effect supports the \fB\-o\fR global option (see above).

See also \fBfilter\fR for a bandpass filter with steeper shoulders.
.TP
bandpass\fB\^|\^\fRbandreject \fIfrequency bandwidth\fR
Apply a two-pole Butterworth band-pass or band-reject filter with
central frequency (in Hz) \fIfrequency\fR,
and bandwidth (in Hz, and as determined by the 3dB points)
\fIbandwidth\fR.
The filter rolls off at 6dB per octave (20dB per decade).

These effects support the \fB\-o\fR global option (see above).
.TP
bandreject \fIfrequency bandwidth\fR
Apply a band-reject filter.
See the description of the \fBbandpass\fR effect for details.
.TP
bass\fB\^|\^\fRtreble \fIgain\fR \fB[\fR\fIfrequency\fR\fB] [\fR\fIslope\fR\fB]\fR
Boost or cut the bass (lower) or treble (upper) frequencies of the audio
using a two-pole shelving filter with a response similar to that
of a standard hi-fi's (Baxandall) tone controls.  This is also
known as shelving equalisation or EQ.

\fIgain\fR gives the dB gain at 0Hz (for \fBbass\fR), or whichever is
the lower of ~22kHz and the Nyquist frequency (for \fBtreble\fR).  Its
useful range is about \-20 (for a large cut) to +20 (for a large
boost).
Beware of
.B Clipping
when using a positive \fIgain\fR.

If desired, the filter can be fine-tuned using the following
optional parameters (in either order):

\fIfrequency\fR sets the filter's center frequency and so can be
used to extend or reduce the frequency range to be boosted or
cut.  The default value is 100Hz (for \fBbass\fR) or 3kHz (for
\fBtreble\fR).

\fIslope\fR is a number between 0 and 1 that determines how
steep the filter's shelf transition is.  Its useful range is
about 0.3 (for a gentle slope) to 1 (for a steep slope).  The
default value is 0.5.

These effects support the \fB\-o\fR global option (see above).

See also \fBequalizer\fR for a peaking equalisation effect.
.TP
chorus \fIgain-in gain-out\fR \fB{\fR \fIdelay decay speed depth\fR \-s\fB\^|\^\fR\-t \fB}\fR
Add a chorus effect to the audio.  Each four-tuple
delay/decay/speed/depth gives the delay in milliseconds
and the decay (relative to gain-in) with a modulation
speed in Hz using depth in milliseconds.
The modulation is either sinusoidal (\fB\-s\fR) or triangular
(\fB\-t\fR).  Gain-out is the volume of the output.
.TP
compand \fIattack1\fR,\fIdecay1\fR\fB[\fR,\fIattack2\fR,\fIdecay2\fR\fB...]\fR
\fIin-dB1\fR,\fIout-dB1\fR\fB[\fR,\fIin-dB2\fR,\fIout-dB2\fR\fB...]\fR
.br
\fB[\fR\fIgain\fR \fB[\fR\fIinitial-volume\fR \fB[\fR\fIdelay\fR\fB] ] ]\fR

Compand (compress or expand) the dynamic range of the audio.  The
attack and decay time specify the integration time over which the
absolute value of the input signal is integrated to determine its
volume; attacks refer to increases in volume and decays refer to
decreases.  Where more than one pair of attack/decay parameters are
specified, each channel is treated separately and the number of pairs
must agree with the number of input channels.  The second parameter is
a list of points on the compander's transfer function specified in dB
relative to the maximum possible signal amplitude.  The input values
must be in a strictly increasing order but the transfer function does
not have to be monotonically rising.  The special value \fB\-inf\fR may
be used to indicate that the input volume should be associated output
volume.  The points \fB\-inf,\-inf\fR and \fB0,0\fR are assumed; the
latter may be overridden, but the former may not.

The third
(optional) parameter is a post-processing gain in dB which is applied
after the compression has taken place; the fourth (optional) parameter
is an initial volume to be assumed for each channel when the effect
starts.  This permits the user to supply a nominal level initially, so
that, for example, a very large gain is not applied to initial signal
levels before the companding action has begun to operate: it is quite
probable that in such an event, the output would be severely clipped
while the compander gain properly adjusts itself.

The fifth (optional) parameter is a delay in seconds.
The input signal is analysed immediately to control the compander, but
it is delayed before being fed to the volume adjuster.
Specifying a delay approximately equal to the attack/decay times
allows the compander to effectively operate in a `predictive' rather than a
reactive mode.
.TP
dcshift \fIshift\fR \fB[\fR\fIlimitergain\fR\fB]\fR
DC Shift the audio, with basic linear amplitude formula.
This is most useful if your audio tends to not be centered around
a value of 0.  Shifting it back will allow you to get the most volume
adjustments without clipping.

The first option is the \fIdcshift\fR value.  It is a floating point number that
indicates the amount to shift.

An optional
.I limitergain
can be specified as well.  It should have a value much less than 1
(e.g. 0.05 or 0.02) and is used only on peaks to prevent clipping.
.TP
deemph
Apply a treble attenuation shelving filter to audio in
audio-CD format.  The frequency response of pre-emphasized
recordings is rectified.  The filtering is defined in the
standard document ISO 908.

This effect supports the \fB\-o\fR global option (see above).

.TP
dither \fB[\fR\fIdepth\fR\fB]\fR
Apply dithering to the audio.
Dithering deliberately adds digital white noise to the signal
in order to mask audible quantization effects that
can occur if the output sample size is less than 24 bits.
By default, the amount of noise added is 1/2 bit;
the optional \fIdepth\fR parameter is a (linear or voltage)
multiplier of this amount.

This effect should not be followed by any other effect that
affects the audio.
.TP
earwax
Makes audio easier to listen to on headphones.
Adds `cues' to audio in audio-CD format so that
when listened to on headphones the stereo image is
moved from inside
your head (standard for headphones) to outside and in front of the
listener (standard for speakers).  See
http://www.geocities.com/beinges
for a full explanation.
.TP
echo \fIgain-in gain-out delay decay\fR \fB[\fR\fIdelay decay\fR \fB... ]\fR
Add echoing to the audio.
Each
.I "delay decay"
pair gives the delay in milliseconds
and the decay (relative to gain-in) of that echo.
Gain-out is the volume of the output.
.TP
echos \fIgain-in gain-out delay decay\fR \fB[\fR\fIdelay decay\fR \fB... ]\fR
Add a sequence of echos to the audio.
Each
.I "delay decay"
pair gives the delay in milliseconds
and the decay (relative to gain-in) of that echo.
Gain-out is the volume of the output.
.TP
equalizer \fIcentral-frequency Q gain\fR
Apply a two-pole peaking equalisation (EQ) filter.
This allows modification (\fIgain\fR) of the signal level at and
around (\fIQ\fR) a central frequency (\fIcentral-frequency\fR),
leaving all other frequencies untouched (unlike
bandpass/bandreject filters).

\fIcentral-frequency\fR is the filter's central frequency in Hz, \fIQ\fR
its `Q-factor' (see http://en.wikipedia.org/wiki/Q_factor), and
\fIgain\fR is the gain or attenuation in dB.
Beware of
.B Clipping
when using a positive \fIgain\fR.

In order to produce complex equalisation curves, this effect
can be given several times, each with a different central frequency.

This effect supports the \fB\-o\fR global option (see above).

See also \fBbass\fR and \fBtreble\fR for shelving equalisation effects.
.TP
fade \fB[\fR\fItype\fR\fB]\fR \fIfade-in-length\fR \fB[\fR\fIstop-time\fR \fB[\fR\fIfade-out-length\fR\fB] ]\fR
Add a fade effect to the beginning, end, or both of the audio.

For fade-ins, this starts from the first sample and ramps the volume of the audio from 0 to full volume over \fIfade-in-length\fR seconds.  Specify 0 seconds if no fade-in is wanted.

For fade-outs, the audio will be truncated at
.I stop-time
and
the volume will be ramped from full volume down to 0 starting at
\fIfade-out-length\fR seconds before the \fIstop-time\fR.  If
.I fade-out-length
is not specified, it defaults to the same value as
\fIfade-in-length\fR.
No fade-out is performed if
.I stop-time
is not specified.

All times can be specified in either periods of time or sample counts.
To specify time periods use the format hh:mm:ss.frac format.  To specify
using sample counts, specify the number of samples and append the letter `s'
to the sample count (for example `8000s').

An optional \fItype\fR can be specified to change the type of envelope.  Choices are \fBq\fR for quarter of a sine wave, \fBh\fR for half a sine wave, \fBt\fR for linear slope, \fBl\fR for logarithmic, and \fBp\fR for inverted parabola.  The default is a linear slope.
.TP
filter \fB[\fR\fIlow\fR\fB]\fR\-\fB[\fR\fIhigh\fR\fB] [\fR\fIwindow-len\fR \fB[\fR\fIbeta\fR\fB]]\fR
Apply a sinc-windowed lowpass, highpass, or bandpass filter of given
window length to the signal.
\fIlow\fR refers to the frequency of the lower 6dB corner of the filter.
\fIhigh\fR refers to the frequency of the upper 6dB corner of the filter.

A low-pass filter is obtained by leaving \fIlow\fR unspecified, or 0.
A high-pass filter is obtained by leaving \fIhigh\fR unspecified, or 0,
or greater than or equal to the Nyquist frequency.

The \fIwindow-len\fR, if unspecified, defaults to 128.
Longer windows give a sharper cutoff, smaller windows a more gradual cutoff.

The \fIbeta\fR, if unspecified, defaults to 16.  This selects a Kaiser window.
You can select a Nuttall window by specifying anything <= 2 here.
For more discussion of beta, look under the \fBresample\fR effect.

.TP
flanger \fB[\fR\fIdelay depth regen width speed shape phase interp\fR\fB]\fR
Apply a flanging effect to the audio.
All parameters are optional (right to left).
.TS
center box;
cB cB cB lB
cI c c l.
\ 	Range	Default	Description
delay	0 \- 10	0	Base delay in milliseconds.
depth	0 \- 10	2	Added swept delay in milliseconds.
regen	\-95 \- +95	0	T{
.na
Percentage regeneration (delayed signal feedback).
T}
width	0 \- 100	71	T{
.na
Percentage of delayed signal mixed with original.
T}
speed	0.1 \- 10	0.5	Sweeps per second (Hz).
shape	\ 	sin	Swept wave shape: sine\^|\^triangle.
phase	0 \- 100	25	T{
.na
Swept wave percentage phase-shift for multi-channel (e.g. stereo) flange;
0 = 100 = same phase on each channel.
T}
interp	\ 	lin	T{
.na
Digital delay-line interpolation: linear\^|\^quadratic.
T}
.TE

.TP
highp\fB\^|\^\fRlowp \fIfrequency\fR
Apply a single-pole recursive high-pass or low-pass filter with
3dB point \fIfrequency\fR.
The filters roll off at 6dB per octave (20dB per decade).

These effects support the \fB\-o\fR global option (see above).

See also \fBfilter\fR for filters with a sharper cutoff.
.TP
highpass\fB\^|\^\fRlowpass \fIfrequency\fR
Apply a two-pole Butterworth high-pass or low-pass filter with
3dB point \fIfrequency\fR.
The filters roll off at 12dB per octave (40dB per decade).

These effects support the \fB\-o\fR global option (see above).
.TP
lowp \fIfrequency\fR
Apply a low-pass filter.
See the description of the \fBhighp\fR effect for details.
.TP
lowpass \fIfrequency\fR
Apply a low-pass filter.
See the description of the \fBhighpass\fR effect for details.
.TP
mask \fB[\fR\fIdepth\fR\fB]\fR
This effect is just an alias of the \fBdither\fR effect but is left
here for historical reasons.
.TP
mcompand "\fIattack1,decay1\fR\fB[\fR,\fIattack2,decay2\fR\fB...]\fR
\fIin-dB1,out-dB1\fR\fB[\fR,\fIin-dB2,out-dB2\fR\fB...]\fR
.br
\fB[\fR\fIgain\fR \fB[\fR\fIinitial-volume\fR \fB[\fR\fIdelay\fR\fB] ] ]\fR" \fIxover-freq\fR

Multi-band compander is similar to the single band compander but
the audio is first divided up into bands and then the compander
is run on each band.  See the \fBcompand\fR effect for the definition of its options.  Compand options are specified between double quotes and the crossover frequency for that band is specified separately with \fIxover-fre\fR.  This can be repeated multiple times to create multiple bands.
.TP
noiseprof \fB[\fR\fIprofile-file\fR\fB]\fR
Calculate a profile of the audio for use in noise reduction.
See the description of the \fBnoisered\fR effect for details.
.TP
noisered \fIprofile-file\fR \fB[\fR\fIthreshold\fR\fB]\fR
Noise reduction filter with profiling.  This filter is moderately effective at
removing consistent background noise such as hiss or hum.  To use it, first run
the \fBnoiseprof\fR effect on a section of audio that ideally would
contain silence but in fact contains noise.
The \fBnoiseprof\fR effect will write out a noise profile
to \fIprofile-file\fR, or to stdout if no \fIprofile-file\fR is specified.
If there is audio output on stdout then the profile will instead be directed to
stderr.

To actually remove the noise, run
SoX again with the \fInoisered\fR filter.  The
filter needs one parameter, \fIprofile-file\fR, which contains the noise profile
from \fBnoiseprof\fR.  \fIthreshold\fR specifies how much noise should be removed, and
may be between 0 and 1 with a default of 0.5.  Higher values will remove more
noise but present a greater likelyhood of distorting the desired audio signal.
Experiment with different threshold values to find the optimal one for your
audio.
.TP
pad \fB{\fR \fIlength\fR\fB[\fR@\fIposition\fR\fB] }\fR
Pad the audio with silence, at the beginning, the end, or any
specified points through the audio.
Both
.I length
and
.I position
can specify a time or, if appended with an `s', a number of samples.
.I length
is the amount of silence to insert and
.I position
the position in the input audio stream at which to insert it.
Any number of lengths and positions may be specified, provided that
a specified position is not less that the previous one.
.I position
is optional for the first and last lengths specified and
if omitted correspond to the beginning and the end of the audio respectively.
For example:
.B pad 1.5 1.5
adds 1.5 seconds of silence padding at each end of the audio, whilst
.B pad 4000s@3:00
inserts 4000 samples of silence 3 minutes into the audio.
If silence is wanted only at the end of the audio, specify either the end
position or specify a zero-length pad at the start.
.TP
pan \fIdirection\fR
Pan the audio from one channel to another.  This is done by
changing the volume of the input channels so that it fades out on one
channel and fades-in on another.  If the number of input channels is
different then the number of output channels then this effect tries to
intelligently handle this.  For instance, if the input contains 1 channel
and the output contains 2 channels, then it will create the missing channel
itself.  The
.I direction
is a value from \-1 to 1.  \-1 represents
far left and 1 represents far right.  Numbers in between will start the
pan effect without totally muting the opposite channel.
.TP
phaser \fIgain-in gain-out delay decay speed\fR \fB[\fR\-s\fB\^|\^\fR\-t\fB]\fR
Add a phasing effect to the audio.  Each triple
delay/decay/speed gives the delay in milliseconds
and the decay (relative to gain-in) with a modulation
speed in Hz.
The modulation is either sinusoidal (\fB\-s\fR) or triangular
(\fB\-t\fR).  The decay should be less than 0.5 to avoid
feedback.  Gain-out is the volume of the output.
.TP
pick \fB[\fR\-1\fB\^|\^\fR\-2\fB\^|\^\fR\-3\fB\^|\^\fR\-4\fB\^|\^\fR\-l\fB\^|\^\fR\-r\fB\^|\^\fR\-f\fB\^|\^\fR\-b\fB]\fR
Pick a subset of channels to be copied into the output file.  This effect is just an alias of the
.B avg
effect
but is left here for historical reasons.
.TP
pitch \fIshift\fR \fB[\fR\fIwidth interpolate fade\fR\fB]\fR
Change the pitch of file without affecting its duration by cross-fading
shifted samples.
.I shift
is given in cents.  Use a positive value to shift to treble, negative value to shift to bass.
Default shift is 0.
.I width
of window is in ms.  Default width is 20ms.  Try 30ms to lower pitch,
and 10ms to raise pitch.
.I interpolate
option, can be \fBcubic\fR or \fBlinear\fR.  Default is \fBcubic\fR.  The
.I fade
option, can be \fBcos\fR, \fBhamming\fR, \fBlinear\fR or
\fBtrapezoid\fR; the default is \fBcos\fR.
.TP
polyphase \fB[\fR\-w nut\fB\^|\^\fRham\fB] [\fR\-width long\fB\^|\^\fRshort\fB\^|\^\fR\fIn\fR\fB] [\fR\-cutoff \fIc\fR\fB]\fR
Change the sampling rate using `polyphase interpolation', a DSP algorithm.
This method is relatively slow and memory intensive.

If the \fB\-w\fR parameter is \fBnut\fR, then a Nuttall (~90 dB
stop-band) window will be used; \fBham\fR selects a Hamming (~43
dB stop-band) window.  The default is Nutall.

The \fB\-width\fR parameter specifies the (approximate) width of the filter.
.B long
is 1024 samples;
.B short
is 128 samples.  Alternatively, an exact number (\fIn\fR) can be used.
The default is
.B long.
The
.B short
option is not recommended, as it produces poor quality results.

The \fB\-cutoff\fR value (\fIc\fR) specifies the filter cutoff frequency in terms of fraction of
frequency bandwidth, also know as the Nyquist frequency.  See
the \fBresample\fR effect for
further information on Nyquist frequency.  If up-sampling, then this is the
fraction of the original signal
that should go through.  If down-sampling, this is the fraction of the
signal left after down-sampling.  The default is 0.95.

See also
.B rabbit
and
.B resample
for other sample-rate changing effects.
.TP
rabbit \fB[\fR\-c0\fB\^|\^\fR\-c1\fB\^|\^\fR\-c2\fB\^|\^\fR\-c3\fB\^|\^\fR\-c4\fB]\fR
Change the sampling rate using `libsamplerate', also known as `Secret Rabbit
Code'.  This effect is
optional and must have been selected at compile time of SoX.  See
http://www.mega-nerd.com/SRC for details of the algorithms.  Algorithms
0 through 2 are progressively faster and lower quality versions of the
sinc algorithm; the default is \fB\-c0\fR, which is probably the best
quality algorithm for general use currently available in SoX.
Algorithm 3 is zero-order hold, and 4 is linear interpolation.

See also
.B polyphase
and
.B resample
for other sample-rate changing effects, and see
\fBresample\fR for more discussion of resampling.
.TP
rate
Does the same as \fBresample\fR with no parameters; it exists for
backwards compatibility.
.TP
repeat \fIcount\fR
Repeat the entire audio \fIcount\fR times.  Requires disk space to store the data to be repeated.
Note that repeating once yields two copies: the orignal audio and the
repeated audio.
.TP
resample \fB[\fR\-qs\fB\^|\^\fR\-q\fB\^|\^\fR\-ql\fB] [\fR\fIrolloff\fR \fB[\fR\fIbeta\fR\fB] ]\fR
Change the sampling rate using simulated
analog filtration.  Other rate changing effects available are
\fBpolyphase\fR and \fBrabbit\fR.  There is a detailed analysis of
\fBresample\fR and \fBpolyphase\fR at
http://leute.server.de/wilde/resample.html; see \fBrabbit\fR for a
pointer to its own documentation.

By default, linear interpolation is used,
with a window width about 45 samples at the lower of the two rates.
This gives an accuracy of about 16 bits, but insufficient stop-band rejection
in the case that you want to have roll-off greater than about 0.80 of
the Nyquist frequency.

The \fB\-q*\fR options will change the default values for roll-off and beta
as well as use quadratic interpolation of filter
coefficients, resulting in about 24 bits precision.
The \fB\-qs\fR, \fB\-q\fR, or \fB\-ql\fR options specify increased accuracy
at the cost of lower execution speed.  It is optional to specify
roll-off and beta parameters when using the \fB\-q*\fR options.

Following is a table of the reasonable defaults which are built-in to
SoX:

.TS
center box;
cB cB cB cB cB
c c n c c
cB c n c c.
Option	Window	Roll-off	Beta	Interpolation
(none)	45	0.80	16	linear
\-qs	45	0.80	16	quadratic
\-q	75	0.875	16	quadratic
\-ql	149	0.94	16	quadratic
.TE

\fB\-qs\fR, \fB\-q\fR, or \fB\-ql\fR use window lengths of 45, 75, or 149
samples, respectively, at the lower sample-rate of the two files.
This means progressively sharper stop-band rejection, at proportionally
slower execution times.

\fIrolloff\fR refers to the cut-off frequency of the
low pass filter and is given in terms of the
Nyquist frequency for the lower sample rate.  rolloff therefore should
be something between 0 and 1, in practise 0.8\-0.95.  The defaults are
indicated above.

The \fINyquist frequency\fR is equal to (sample rate / 2).  Logically,
this is because the A/D converter needs at least 2 samples to detect 1
cycle at the Nyquist frequency.  Frequencies higher then the Nyquist
will actually appear as lower frequencies to the A/D converter and
is called aliasing.  Normally, A/D converts run the signal through
a highpass filter first to avoid these problems.

Similar problems will happen in software when reducing the sample rate of
an audio file (frequencies above the new Nyquist frequency can be aliased
to lower frequencies).  Therefore, a good resample effect
will remove all frequency information above the new Nyquist frequency.

The \fIrolloff\fR refers to how close to the Nyquist frequency this cutoff
is, with closer being better.  When increasing the sample rate of an
audio file you would not expect to have any frequencies exist that are
past the original Nyquist frequency.  Because of resampling properties, it
is common to have aliasing artifacts created above the old
Nyquist frequency.  In that case the \fIrolloff\fR refers to how close
to the original Nyquist frequency to use a highpass filter to remove
these artifacts, with closer also being better.

The \fIbeta\fR parameter
determines the type of filter window used.  Any value greater than 2 is
the beta for a Kaiser window.  Beta <= 2 selects a Nuttall window.
If unspecified, the default is a Kaiser window with beta 16.

In the case of Kaiser window (beta > 2), lower betas produce a somewhat
faster transition from pass-band to stop-band, at the cost of noticeable artifacts.
A beta of 16 is the default, beta less than 10 is not recommended.  If you want
a sharper cutoff, don't use low beta's, use a longer sample window.
A Nuttall window is selected by specifying any `beta' <= 2, and the
Nuttall window has somewhat steeper cutoff than the default Kaiser window.
You will probably not need to use the beta parameter at all, unless you are
just curious about comparing the effects of Nuttall vs. Kaiser windows.

This is the default effect if the two files have different sampling rates.
Default parameters are, as indicated above, Kaiser window of length 45,
roll-off 0.80, beta 16, linear interpolation.

\fBNOTE:\fR \fB\-qs\fR is only slightly slower, but more accurate for
16-bit or higher precision.

\fBNOTE:\fR In many cases of up-sampling, no interpolation is needed,
as exact filter coefficients can be computed in a reasonable amount of space.
To be precise, this is done when

.ce 3
input-rate < output-rate
&&
output-rate / gcd(input-rate, output-rate) <= 511
.TP
reverb \fIgain-out reverb-time delay\fR \fB[\fR\fIdelay\fR \fB... ]\fR
Add reverberation to the audio.  Each
.I delay
is given
in milliseconds and its feedback is depending on the
.I reverb-time
in milliseconds.  Each
.I delay
should be in
the range of half to quarter of
.I reverb-time
to get a realistic reverberation.
.I gain-out
is the volume of the output.
.TP
reverse
Reverse the audio completely.
.TP
silence \fIabove-periods\fR \fB[\fR\fIduration threshold\fR\fB[\fRd\fB\^|\^\fR%\fB] [\fR\fIbelow-periods duration threshold\fR\fB[\fRd\fB\^|\^\fR%\fB] ]\fR

Removes silence from the beginning, middle, or end of the audio.  Silence is anything below a specified threshold.

The \fIabove-periods\fR value is used to indicate if audio should be trimmed at
the beginning of the audio.  A value of zero indicates no silence
should be trimmed from the beginning.  When specifying an non-zero
\fIabove-periods\fR, it trims audio up until it finds non-silence.
Normally, when trimming silence from
beginning of audio the \fIabove-periods\fR will be 1 but it can be increased to
higher values to trim all audio up to a specific count of non-silence periods.
For example, if you had an audio file with two songs that each contained
2 seconds of silence before the song, you could specify an \fIabove-period\fR
of 2 to strip out both silence periods and the first song.

When \fIabove-periods\fR is non-zero, you must also specify a \fIduration\fR and
\fIthreshold\fR.  \fIDuration\fR indications the amount of time that non-silence must be
detected before it stops trimming audio.  By increasing the duration, burst of noise can be treated as silence and trimmed off.

\fIThreshold\fR is used to indicate what sample value you should treat as
silence.  For digital audio, a value of 0 may be fine but for audio
recorded from analog, you may wish to increase the value to account
for background noise.

When optionally trimming silence from the end of the audio, you specify
a \fIbelow-periods\fR count.  In this case, \fIbelow-period\fR means
to remove all audio after silence is detected.
Normally, this will be a value 1 of but it can
be increased to skip over periods of silence that are wanted.  For example,
if you have a song with 2 seconds of silence in the middle and 2 second
at the end, you could set below-period to a value of 2 to skip over the
silence in the middle of the audio.

For \fIbelow-periods\fR, \fIduration\fR specifies a period of silence
that must exist before audio is not copied any more.  By specifying
a higher duration, silence that is wanted can be left in the audio.
For example, if you have a song with an expected 1 second of silence
in the middle and 2 seconds of silence at the end, a duration of 2
seconds could be used to skip over the middle silence.

Unfortunately, you must know the length of the silence at the
end of your audio file to trim off silence reliably.  A work around is
to use the \fBsilence\fR effect in combination with the \fBreverse\fR effect.
By first reversing the audio, you can use the \fIabove-periods\fR
to reliably trim all audio from what looks like the front of the file.
Then reverse the file again to get back to normal.

To remove silence from the middle of a file, specify a
\fIbelow-periods\fR that is negative.  This value is then
treated as a positive value and is also used to indicate the
effect should restart processing as specified by the
\fIabove-periods\fR, making it suitable for removing periods of
silence in the middle of the audio.

The \fIperiod\fR counts are in units of samples.  \fIDuration\fR counts may be in the format of hh:mm:ss.frac, or the exact count of samples.  \fIThreshold\fR numbers may be suffixed with 
.B d
to indicate the value is in decibels, or
.B %
to indicate a percentage of maximum value of the sample value (\fB0%\fR specifies pure digital silence).
.TP
speed \fIfactor\fR\fB[\fRc\fB]\fR
Adjust the audio speed (pitch and tempo together).  \fIfactor\fR
is either the ratio of the new speed to the old speed: greater
than 1 speeds up, less than 1 slows down, or, if appended with the
letter
`c', the number of cents (i.e. 100ths of a semitone) by
which the pitch (and tempo) should be adjusted: greater than 0
increases, less than 0 decreases.

By default, the speed change is performed by the \fBresample\fR
effect with its default parameters.  For higher quality
resampling, in addition to the \fBspeed\fR effect, specify
either the \fBresample\fR or the \fBrabbit\fR effect with
appropriate parameters.
.TP
stat \fB[\fR\-s \fIn\fR\fB] [\fR\-rms\fB] [\fR\-freq\fB] [\fR\-v\fB] [\fR\-d\fB]\fR
Do a statistical check on the input file,
and print results on the standard error file.  Audio is passed
unmodified through the SoX processing chain.

The `Volume Adjustment:' field in the statistics
gives you the parameter to the
.B \-v
.I number
which will make the audio as loud as possible without clipping.
Note: See the discussion on
.B Clipping
above for reasons why it is rarely a good idea to actually do this.

The option
.B \-v
will print out the `Volume Adjustment:' field's value only and
return.  This could be of use in scripts to auto convert the
volume.

The
.B \-s
option is used to scale the input data by a given factor.  The default value
of
.I n
is the max value of a signed long variable (0x7fffffff).  Internal effects
always work with signed long PCM data and so the value should relate to this
fact.

The
.B \-rms
option will convert all output average values to `root mean square'
format.

The
.B \-freq
option calculates the input's power spectrum and prints it to standard error.

There is also an optional parameter
.B \-d
that will print out a hex dump of the
audio from the internal buffer that is in 32-bit signed PCM data.
This is mainly only of use in tracking down endian problems that
creep in to SoX on cross-platform versions.

.TP
stretch \fIfactor\fR \fB[\fR\fIwindow fade shift fading\fR\fB]\fR
Time stretch the audio by the given factor.  Changes duration without affecting the pitch.
.I factor
of stretching: >1 lengthen, <1 shorten duration.
.I window
size is in ms.  Default is 20ms.  The
.I fade
option, can be `lin'.
.I shift
ratio, in \fB[\fR0 1\fB]\fR.  Default depends on stretch factor. 1
to shorten, 0.8 to lengthen.  The
.I fading
ratio, in \fB[\fR0 0.5\fB]\fR.  The amount of a fade's default depends on
.I factor
and \fIshift\fR.
.TP
swap \fB[\fR\fI1 2\fR \fB|\fR \fI1 2 3 4\fR\fB]\fR
Swap channels in multi-channel audio files.  Optionally, you may
specify the channel order you would like the output in.  This defaults
to output channel 2 and then 1 for stereo and 2, 1, 4, 3 for quad-channels.
An interesting
feature is that you may duplicate a given channel by overwriting another.
This is done by repeating an output channel on the command line.  For example,
.B swap 2 2
will overwrite channel 1 with channel 2; creating a stereo
file with both channels containing the same audio.
.TP
synth \fB[\fR\fIlen\fR\fB] {[\fR\fItype\fR\fB] [\fR\fIcombine\fR\fB] [\fR\fIfreq\fR\fB[\fR\fI\-freq2\fR\fB]] [\fR\fIoff\fR\fB] [\fR\fIph\fR\fB] [\fR\fIp1\fR\fB] [\fR\fIp2\fR\fB] [\fR\fIp3\fR\fB]}\fR
This effect can be used to generate fixed or swept frequency audio tones
with various wave shapes, or to generate wide-band noise of various
`colours'.
Multiple synth effects can be cascaded to produce more complex
waveforms; at each stage it is possible to choose whether the generated
waveform will be mixed with, or modulated onto
the output from the previous stage.
Audio for each channel in a multi-channel audio file can be synthesised
independently.

Though this effect is used to generate audio, an input file must
still be specified.  This can be used to set the synthesised audio
length, the number of channels, and the sampling rate, however since the
input file's audio is not needed, the
.B null
file `\fB\-n\fR' is usually used instead (and the length specified
as a parameter to \fBsynth\fR).

For example, the following produces a 3 second, 44.1kHz,
stereo audio file containing a sine-wave swept from 300 to 3300 Hz.

	sox \-n output.au synth 3 sine 300\-3300

This produces an 8kHz mono version:

	sox \-r 8000 \-c 1 \-n output.au synth 3 sine 300\-3300

Multiple channels can be synthesised by specifying the set of
parameters shown between braces (\fB{}\fR) multiple times;
the following puts the swept tone in the left channel and adds `brown'
noise in the right:

	sox \-n output.au synth 3 sine 300\-3300 brownnoise

The following example shows how two synth effects can be cascaded
to create a more complex waveform:

	sox \-n output.au synth .5 sine 200\-500 synth .5 sine fmod 700\-100

Frequencies can also specified in terms of musical semitones relative to
`middle A' (440Hz);  the following could be used to help tune
a guitar's `low E' string (on a system that supports
\fBalsa\fR):

	sox \-n \-t alsa default synth sine %\-5

The following produces a chord with a pipe-organ sound:

	sox \-c4 \-n \-c1 Am7.au synth sin %0 sin %4 sin %7 sin %10 avg fade q .1 1 .1

N.B.  This effect generates audio at maximum volume, which means that there
is a high chance of clipping when using the audio subsequently, so
in most cases, you will want to follow this effect with the \fBvol\fR
effect to select a suitable attenuation.

A detailed description of each
.B synth
parameter follows:

\fIlen\fR is the length of audio to synthesise expressed as a time
or as a number of samples;
0=inputlength, default=0.

The format for specifying lengths in time is hh:mm:ss.frac.  The format
for specifying sample counts is the number of samples with the letter
`s' appended to it.

\fItype\fR is one of sine, square, triangle, sawtooth, trapezium, exp,
\fB[\fRwhite\fB]\fRnoise, pinknoise, brownnoise; default=sine

\fIcombine\fR is one of create, mix, amod (amplitude modulation), fmod
(frequency modulation); default=create

\fIfreq\fR/\fIfreq2\fR are the frequencies at the beginning/end of
synthesis in Hz or, if prepended with `%', semitones relative to A
(440Hz); for both, default=%0.  Not used for noise.

\fIoff\fR is the bias (DC-offset) of the signal in percent; default=0.

\fIph\fR is the phase shift in percentage of 1 cycle; default=0.  Not
used for noise.

\fIp1\fR is the percentage of each cycle that is `on' (square), or
`rising' (triangle, exp, trapezium); default=50 (square, triangle, exp),
default=10 (trapezium).

\fIp2\fR trapezium: the percentage through each cycle at which `falling'
begins; default=50. exp: the amplitude in percent; default=100.

\fIp3\fR trapezium: the percentage through each cycle at which `falling'
ends; default=60.
.TP
treble \fIgain\fR \fB[\fR\fIfrequency\fR\fB] [\fR\fIslope\fR\fB]\fR
Apply a treble tone control effect.
See the description of the \fBbass\fR effect for details.
.TP
trim \fIstart\fR \fB[\fR\fIlength\fR\fB]\fR
Trim can trim off unwanted audio from the beginning and end of the
audio.  Audio is not sent to the output stream until
the \fIstart\fR location is reached.

The optional \fIlength\fR parameter tells the number of samples to output
after the \fIstart\fR sample and is used to trim off the back side of the
audio.  Using a value of 0 for the \fIstart\fR parameter will allow
trimming off the back side only.

Both options can be specified using either an amount of time or an
exact count of samples.  The format for specifying lengths in time is
hh:mm:ss.frac.  A start value of 1:30.5 will not start until 1 minute,
thirty and 1/2 seconds into the audio.  The format for specifying
sample counts is the number of samples with the letter `s' appended to
it.  A value of 8000s will wait until 8000 samples are read before
starting to process audio.
.TP
vibro \fIspeed\fR \fB[\fR\fIdepth\fR\fB]\fR
Apply low frequency sinusoidal amplitude modulation to the audio.
Otherwise known as `tremolo', in the guitar world
this effect is often referred to as `vibrato' (which in fact
varies pitch, not amplitude).
The modulation frequency in Hz is given by
.I speed
(0 to 30), and the modulation depth by
.I depth
(0 to 1, default 0.5).
.TP
vol \fIgain\fR \fB[\fR\fItype\fR \fB[\fR\fIlimitergain\fR\fB] ]\fR
Apply an amplification or an attenuation to the audio signal.
Unlike the
.B \-v
option (which is used for balancing multiple input files as they enter the
SoX effects processing chain),
.B vol
is an effect like any other so can be applied anywhere, and several times
if necessary, during the processing chain.

The amount to change the volume is given by
.I gain
which is interpreted, according to the given \fItype\fR, as follows: if
.I type
is \fBamplitude\fR (or is omitted), then
.I gain
is an amplitude (i.e. voltage or linear) ratio,
if \fBpower\fR, then a power (i.e. wattage or voltage-squared) ratio,
and if \fBdB\fR, then a power change in dB.

When
.I type
is \fBamplitude\fR or \fBpower\fR, a
.I gain
of 1 leaves the volume unchanged,
less than 1 decreases it,
and greater than 1 increases it;
a negative
.I gain
inverts the audio signal in addition to adjusting its volume.

When
.I type
is \fBdB\fR, a
.I gain
of 0 leaves the volume unchanged,
less than 0 decreases it,
and greater than 0 increases it.

See http://en.wikipedia.org/wiki/Decibel
for a detailed discussion on electrical (and hence audio signal)
voltage and power ratios.

Beware of
.B Clipping
when the increasing the volume.

An optional \fIlimitergain\fR value can be specified and should be a
value much less
than 1 (e.g. 0.05 or 0.02) and is used only on peaks to prevent clipping.
Not specifying this parameter will cause no limiter to be used.  In verbose
mode, this effect will display the percentage of the audio that needed to be
limited.
.SH DIAGNOSTICS
Exit status is 0 for no error, 1 if there is a problem with the
command-line parameters, or 2 if an error occurs during file processing.
.SH BUGS
Please report any bugs found in this version of SoX to the mailing list
(sox-users@lists.sourceforge.net).
.SH SEE ALSO
.BR play (1),
.BR rec (1),
.BR soxexam (1)

The SoX web page at http://sox.sourceforge.net
.SH LICENSE
Copyright 1991 Lance Norskog and Sundry Contributors.
Copyright 1998\-2006 by Chris Bagwell and SoX Contributors.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2, or (at your option)
any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
.SH AUTHORS
Chris Bagwell (cbagwell@users.sourceforge.net).
Additional authors and contributors are listed in the AUTHORS file that
is distributed with the source code.
